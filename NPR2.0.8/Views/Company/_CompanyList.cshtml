@model IEnumerable<NPRModels.Company>
@using NPRModels;
@using NPR2._0._8.Helpers;


@foreach (var item in Model)
{
    <section class="clients">
        <h2>
                  <div class="image">
            @if (item != null && item.CompanyImage != null)
            {
                <img src="@Url.Action("Show", "Company", new { id = item.CompanyID })" />
            }
        </div>
            @Html.ActionLink("Edit", "Edit", "Company", new { id = item.CompanyID }, null)
        </h2>
        <p>
            @Html.ActionLink(string.Format("Create New {0} Campaign", item.CompanyName), "Create", "Campaign", new { ReturnUrl = Url.Action("Index", "Home", new { ReturnUrl = ViewBag.ReturnUrl }), CompanyID = item.CompanyID }, null)
        </p>

            @{
                Html.RenderPartial("~/Views/Campaign/_CampaignList.cshtml", (IEnumerable<Campaign>)item.Campaigns.Where(c => c.CampaignStatus != MyExtensions.GetEnumDescription(Status.Archived)));
            }
    </section>
}
