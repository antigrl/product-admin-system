@model NPRModels.Campaign
@using NPR2._0._8.Helpers;
@using NPRModels;
@{
ViewBag.Title = "Presentation View";
string archived = MyExtensions.GetEnumDescription(Status.Archived);
int count = Model.Products.Where(p => p.ProductStatus != archived).Count();
}
<link rel="stylesheet" href="~/Content/stylesheets/presentation.css">



<h2>Campaign Presentation View - @Html.ActionLink("Back to Campaign", "Edit", new { id = Model.CampaignID })</h2>
<div>
  <h3 class="float-left">
    @Html.DisplayNameFor(model => model.CampaignName): @Html.DisplayFor(model => model.CampaignName)
    <br />
    @Html.DisplayNameFor(model => model.Company.CompanyName): @Html.DisplayFor(model => model.Company.CompanyName)
  </h3>
  <h3 class="float-right">
    @Html.DisplayNameFor(model => model.CampaignProductCount): @Html.DisplayFor(model => model.CampaignProductCount)
    <br />
    Actual Product Count: @count
  </h3>
</div>

@foreach (var product in Model.Products.Where(p => p.ProductStatus != MyExtensions.GetEnumDescription(Status.Archived)).OrderBy(p => p.Category.CategoryName))
{

  <table class="index-table">
    <tbody>
      <tr>
        <td class="product-image image-container">
          <div class="image">
            @if (product.ProductImage != null)
            {
            <img src="@Url.Action("Show", "Product", new { id = product.ProductID })" />
          }
        </div>
      </td>
      <td>
        <table>
          <tr>
            <td>
              <div class="name-container">
                @Html.ActionLink(product.ProductName, "Edit", "Product", new { ReturnUrl = Url.Action("PresentationView", "Campaign", new { id = Model.CampaignID, ReturnUrl = ViewBag.ReturnUrl }) + "?ReturnUrl=" + ViewBag.ReturnUrl, id = product.ProductID }, null)
              </div>
            </td>
            <td style="border-left: 1px solid #000;">
              <div class="icon-container">
                <ul>
                  <li class="dish" style="display: none;">
                    <img src="~/Images/dishwasher-icon.png" alt="">
                  </li>
                  <li class="eco" style="display: none;">
                    <img src="~/Images/leaf-icon.png" alt="">
                  </li>
                  <li class="rec" style="display: none;">
                    <img src="~/Images/recycle-icon.png" alt="">
                  </li>
                  <li  class="usa" style="display: none;">
                    <img src="~/Images/flag-icon.png" alt="">
                  </li>
                </ul>
              </div>
            </td>
          </tr>
        </table>
        <table>
          <tr>
            <td style="border-top: 1px solid #000;">
              <div class="description-container">
                @product.ProductDescription
              </div>
            </td>
            <td style="border-top: 1px solid #000; border-left: 1px solid #000">
              <div class="price-tiers">
                <ul>
                  @foreach (var sellPrice in product.ProductSellPrices.OrderBy(s => s.SellPriceLevel))
                  {
                  <li>@sellPrice.SellPriceFinalAmount.ToString("c")</li>
                }
              </ul>
            </div>
          </td>

          <td style="border-top: 1px solid #000; border-left: 1px solid #000">
            <div class="questions-container">
              YES<br>NO<br>MAYBE<br>
            </div>
          </td>
        </tr>
      </table>
      <table>
        <tr>

          <td style="border-top: 1px solid #000; border-right: 1px solid #000">
            <div class="country-container">
              Made in @product.ProductCountryOfOrigin
            </div>
          </td>
          <td style="border-top: 1px solid #000;">
            <div class="moq-container">
              MOQ:
            </div>
          </td>
        </tr>
      </table>
    </td>
  </tr>

</tbody>
</table>

}
